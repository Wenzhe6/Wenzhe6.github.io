<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>微信小程序 | 李文哲的个人博客</title><meta name="author" content="李文哲"><meta name="copyright" content="李文哲"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="浅谈小程序在 2016 年的「微信公开课 Pro」演讲中，微信事业群总裁张小龙这样描述了小程序的前景与未来：  “ 小程序是一种不需要下载安装即可使用的应用，它实现了应用 “触手可及” 的梦想，用户扫一扫或者搜一下即可打开应用。也体现了 “用完即走” 的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无须安装卸载 “。  小程序刚发布的时候要求压缩包的体积不能大于 1M，否">
<meta property="og:type" content="article">
<meta property="og:title" content="微信小程序">
<meta property="og:url" content="https://liwenzhe002.github.io/2022/06/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/index.html">
<meta property="og:site_name" content="李文哲的个人博客">
<meta property="og:description" content="浅谈小程序在 2016 年的「微信公开课 Pro」演讲中，微信事业群总裁张小龙这样描述了小程序的前景与未来：  “ 小程序是一种不需要下载安装即可使用的应用，它实现了应用 “触手可及” 的梦想，用户扫一扫或者搜一下即可打开应用。也体现了 “用完即走” 的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无须安装卸载 “。  小程序刚发布的时候要求压缩包的体积不能大于 1M，否">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://liwenzhe002.github.io/img/wx%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7.jpg">
<meta property="article:published_time" content="2022-06-21T02:38:41.000Z">
<meta property="article:modified_time" content="2023-03-31T07:57:04.224Z">
<meta property="article:author" content="李文哲">
<meta property="article:tag" content="微信小程序">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://liwenzhe002.github.io/img/wx%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://liwenzhe002.github.io/2022/06/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '微信小程序',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-31 15:57:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/background.css"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/1111.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/wx%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="李文哲的个人博客"><span class="site-name">李文哲的个人博客</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">微信小程序</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-21T02:38:41.000Z" title="发表于 2022-06-21 10:38:41">2022-06-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-31T07:57:04.224Z" title="更新于 2023-03-31 15:57:04">2023-03-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="微信小程序"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="浅谈小程序"><a href="#浅谈小程序" class="headerlink" title="浅谈小程序"></a>浅谈小程序</h1><p>在 2016 年的「微信公开课 Pro」演讲中，微信事业群总裁张小龙这样描述了小程序的前景与未来：</p>
<blockquote>
<p>“ 小程序是一种不需要下载安装即可使用的应用，它实现了应用 “触手可及” 的梦想，用户扫一扫或者搜一下即可打开应用。也体现了 “用完即走” 的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无须安装卸载 “。</p>
</blockquote>
<p>小程序刚发布的时候要求压缩包的体积不能大于 1M，否则无法通过，在 2017 年 4 月做 了改进，由原来的 1M 提升到 2M；</p>
<p>2017 年 1 月 9 日 0 点，万众瞩目的微信第一批小程序正式低调上线。</p>
<p>而在 2020 年的「WWDC 苹果全球开发者大会」中，轻应用则被作为 iOS 14 的主要功能进行强调与推介：</p>
<p><img src="/img/md/wx1.png"></p>
<blockquote>
<p>App Clip 就是一种无需用户在 iPhone 或 iPad 上安装完整的应用程序，就可以访问使用该应用程序的部分功能的轻量级应用，它们专注于处理简单快速的任务。</p>
</blockquote>
<p>不论是张小龙对「微信小程序」略带文艺的描述，还是在 WWDC 上对于「轻应用」在 iOS 生态中的地位描述，我们都能大抵能理解小程序诞生的初衷。而如果我们把时间从这两场发布会的转至今日，却会发现小程序早已不再局限于「用完即走」与「快速打开」，各式各样的小程序已呈现百花齐放的状态，不论是工具小程序，内容小程序，交易小程序，直播小程序，各种类型应有尽有。</p>
<p>不妨让我尝试用自己的工作日常举例，早上出门上班，我会打开「天府健康通」扫描地铁场所码，并把健康码给地铁安检查看，临近中午 11 点 30 分，我会用「美团」或「饿了么」为自己订一份工作餐，吃完午饭后我会打开「动物餐厅」看看小猫咪又赚了多少小鱼干，下午会议时使用「腾讯文档」查看会议纪要，快下班的时候用「叮咚买菜」购置晚饭所需的食材，晚上回家做饭时，用「懒饭 App」看看想吃的番茄肥牛饭怎么做。</p>
<p><img src="/img/md/wx2.png"></p>
<p>时至今日，当我们说到小程序时，也不仅仅在特指微信小程序，各式各样的平台都纷纷推出了自己专属的小程序平台，不论支付宝、字节跳动、美团还是百度等其他互联网大厂，都纷纷推出了自己专属的小程序平台，且都基于自己的生态业务，为小程序提供流量进行支持，希望用户与开发者能够选择自有平台中的小程序进行开发。</p>
<p>随着小程序业务的愈演愈烈，越来越多的流量都被引入了互联网巨头的小程序战场中，但在这个过程中，对于战场中「封闭，不透明」的吐槽与争议也逐渐出现，无数企业都希望自己的应用中也能具备运行小程序的能力，希望能够借此抗争小程序被引入寡头所控制的战场，但「知易行难」，快速完成对小程序的底层与容器的研发，所需要花费的精力与时间并不是短时间就能够完成的。</p>
<p>事实上，小程序可以被理解为是「移动应用 App」的一个细分子集，如果按照「平等透明」的设想，小程序不应该仅仅存在于微信之中，那些我们并不经常使用的应用都可以通过小程序进行重新优化，我们可以通过各式各样的专门应用打开相关的小程序，从而对那些「太重的应用」进行减负操作。</p>
<p>当然了，小程序还会有这样一些特性需要我们注意：</p>
<ul>
<li>小程序不具备「被关注」的能力，获取流量留存用户的操作需要由独立应用或其他渠道完成；</li>
<li>小程序不具备「推送消息与群发消息」的能力，对用户的信息触达与消息传递的操作需要由其他渠道完成；</li>
<li>小程序不具备「跨 App 分享 」的能力，因此对于小程序的分享与打开路径，需要在设计产品时提前思考，而不是把鸡蛋放在一个篮子里；</li>
</ul>
<h2 id="什么样的应用适合使用小程序开发"><a href="#什么样的应用适合使用小程序开发" class="headerlink" title="什么样的应用适合使用小程序开发"></a>什么样的应用适合使用小程序开发</h2><p>虽然小程序市场时至今日依然是一片蓝海，但我想也不是所有应用「都可以，都应该」使用小程序开发的。</p>
<p>基于我们的经验与积累来说，符合「逻辑简单，使用低频，对性能要求不极致」的应用场景，更加适合使用小程序进行研发。</p>
<h3 id="逻辑简单"><a href="#逻辑简单" class="headerlink" title="逻辑简单"></a>逻辑简单</h3><p>是指应用的操作逻辑并不十分复杂，各类生活服务（如打车，订餐，查地图与导航等等）都需要给用户提供简单清晰的操作逻辑，而这一类也天然的符合起初小程序「用完即走」的定义，因此十分符合使用小程序研发。一些逻辑复杂的应用场景想要通过小程序进行适配，就可能会面临更多的设计与研发困难，同时在性能和体验也可能会面对更多需要解决的问题。</p>
<h3 id="使用低频"><a href="#使用低频" class="headerlink" title="使用低频"></a>使用低频</h3><p>是指小程序的使用频率不应该太高，比如社交类的钉钉或飞书，金融类的掌上生活或浦大喜奔，媒体类的网易云音乐或斗鱼都不太适合使用小程序进行重新设计。对于用户使用的频率较高的应用来说，直接打开应用进行体验的步骤肯定最快的，此外由于某些行业的特殊性质（比如具备交易，支付等能力）要求，对于安全性与保密性的首选风险判断原则，也不宜使用常见的小程序进行设计。</p>
<h3 id="对性能要求不极致"><a href="#对性能要求不极致" class="headerlink" title="对性能要求不极致"></a>对性能要求不极致</h3><p>是指由于小程序始终存在于某个独立应用（也被称为宿主应用）中，考虑到目前的性能与研发所限制，暂时不太适合开发对于这两者有更高要求的移动应用。比如把原神，王者荣耀这样的游戏应用通过小程序进行重新设计，在目前来说肯定是不现实的。</p>
<p>当然，随着相关研发实力的增强与产业生态的逐渐补充，也有越来越多的「不可能」变为了「可能」，比如华西证券的「华彩人生」，浦发银行的「浦大喜奔」，某省的移动警务平台等客户都选择使用小程序容器方案进行落地实现</p>
<h2 id="小程序与-H5，原生应用有何区别？"><a href="#小程序与-H5，原生应用有何区别？" class="headerlink" title="小程序与 H5，原生应用有何区别？"></a>小程序与 H5，原生应用有何区别？</h2><p>很多朋友在了解小程序技术的时候，都会有这样的疑惑“到底与 H5，原生应用”这些技术相比，小程序具有哪些优势与劣势呢？</p>
<h3 id="H5-移动应用"><a href="#H5-移动应用" class="headerlink" title="H5 移动应用"></a>H5 移动应用</h3><p>我们常说的 H5 其实也通常可以被视为一种 Web App，相比于我们在桌面端浏览器中打开的网页，主要是增加了一些响应式的设计与交互优化，从而使得这些网页更适合在移动端的浏览器中显示运行。既然是网页应用，那依然是基于 JavaScript，CSS 和 HTML 进行实现的，由于是基于各类前端技术栈进行实现，最大的好处就是快速、简单、方便，且有各种技术资料可以参考。</p>
<p>同样，H5 的缺点与优点也是并存的，比如由于技术已经很成熟了，对于前端经验欠缺的新人来说，面对各式各样的框架，模块、任务管理工具，UI 库可能会出现无从下手的问题；此外相比于原生应用，对于系统权限的获取（比如数据缓存能力，网络通信状态等）都显得比较鸡肋，当低性能的设备加载包含复杂逻辑的页面时，会出现明显的卡顿与延迟问题。</p>
<h3 id="原生应用"><a href="#原生应用" class="headerlink" title="原生应用"></a>原生应用</h3><p>原生应用也被叫做 Native App，相比于 H5 应用通过前端三大件进行实现不同，原生应用主要会采用 iOS 与 Android 的专有语言 Object-C（或 Swift），Java（或 Kotlin）进行实现，大多我们所常见的国民应用，比如微信，支付宝等都属于这种原生应用。</p>
<p>既然被叫做「原生应用」，就像操作系统的亲儿子一样，天然在性能与体验上具备优秀的潜质，也有组件库丰富，接口支持完善等各种优势特点。但原生应用最大的缺陷就是不能跨平台研发，以目前的主流市场为例，必须要支持 iOS 与 Android 两个主流平台。</p>
<h3 id="混合应用"><a href="#混合应用" class="headerlink" title="混合应用"></a>混合应用</h3><p>混合应用一般被称为 Hybrid App。简单来说，混合应用<strong>就是将原生功能封装成对应的 JS 接口，在前端使用 H5 来开发对应的 App （即 H5 作为内容+原生应用作为壳）</strong> ，看上去虽然是一个移动原生应用整体，但实际的页面还是网页，一套代码可以生成 iOS 与 Android 两种安装包，开发成本较低。</p>
<p>我们常见的淘宝，京东等应用由于更新与优化节奏都十分快速，为了更好的响应「贴近用户」的目标，应用中有的功能通过原生 Native 实现，有的功能则通过 H5 页面进行实现，这种应用就属于我们所说的混合应用。</p>
<h3 id="小程序"><a href="#小程序" class="headerlink" title="小程序"></a>小程序</h3><p>严格意义上来说，小程序并不属于以上 3 种应用的任何一种。小程序主要通过 JavaScript 与 CSS 这种常见的前端技术进行开发，但又没有完全使用 HTML 进行实现，在不同的操作系统中，JavaScript 代码分别运行在 iOS 的 JavaScriptCore 与 Android 的 X5 JSCore 中，各家小程序平台或多或少都有一部分自研的核心，因此渲染视图层的组件也有所不同。</p>
<p><img src="/img/md/wx3.png"></p>
<p>相比「 H5 移动应用」与「 移动原生应用」，小程序具备如下优势：</p>
<ul>
<li>具备跨平台的能力，一套代码可以在 iOS 与 Android 两个平台中运行；</li>
<li>远超过 H5 的体验（支持本地缓存，Webview，有丰富的组件与支持库）；</li>
<li>能获取更多系统权限，完成更加丰富的产品设计；</li>
<li>可以避免 DOM 泄露（不使用常用的 window 对象与 document 对象）；</li>
<li>开发简单，上手成本低（比如 FinClip 提供了 FIDE 与开发文档）；</li>
</ul>
<h4 id="常见的小程序开发框架有哪些"><a href="#常见的小程序开发框架有哪些" class="headerlink" title="常见的小程序开发框架有哪些"></a>常见的小程序开发框架有哪些</h4><p>以主要的小程序开发框架举例，腾讯云社区的「极乐君」将不同平台下小程序支持的力度整理在一张表中：</p>
<p><img src="/img/md/wx4.png"></p>
<h1 id="小程序开发环境"><a href="#小程序开发环境" class="headerlink" title="小程序开发环境"></a>小程序开发环境</h1><p>1、<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/">微信文档</a></p>
<p>2、<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html">微信开发工具下载</a></p>
<p>3、<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/">注册小程序账号</a></p>
<p><img src="/img/md/wx5.png"></p>
<p><img src="/img/md/wx6.png"></p>
<h1 id="小程序特点"><a href="#小程序特点" class="headerlink" title="小程序特点"></a>小程序特点</h1><ol>
<li><p>没有 DOM</p>
</li>
<li><p>组件化开发： 具备特定功能效果的代码集合</p>
</li>
<li><p>体积小，单个压缩包体积不能大于 2M，否则无法上线</p>
</li>
<li><p>小程序的四个重要的文件</p>
<ul>
<li>*.js —&gt; js 逻辑 —&gt; js</li>
<li>*.wxml —&gt; view 结构—–&gt; html</li>
<li>*.wxss —&gt; view 样式 —–&gt; css</li>
<li>*. json —-&gt; view 配置—– &gt; json 文件</li>
</ul>
</li>
<li><p>小程序适配方案: rpx (responsive pixel 响应式像素单位)</p>
</li>
</ol>
<ul>
<li>小程序适配单位： rpx</li>
<li>规定任何屏幕下宽度为 750rpx</li>
<li>小程序会根据屏幕的宽度不同自动计算 rpx 值的大小</li>
<li>Iphone6 下： 1rpx = 1 物理像素 = 0.5px</li>
</ul>
<p><img src="/img/md/wx7.png"></p>
<h1 id="小程序配置"><a href="#小程序配置" class="headerlink" title="小程序配置"></a>小程序配置</h1><h2 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h2><p>作用： 用于为整个应用进行选项设置</p>
<p><img src="/img/md/wx8.png"></p>
<h2 id="页面配置"><a href="#页面配置" class="headerlink" title="页面配置"></a>页面配置</h2><p>配图参上</p>
<p>作用：用于为指定的页面进行配置</p>
<p>注：页面配置的优先级高于全局配置</p>
<h2 id="sitemap-配置"><a href="#sitemap-配置" class="headerlink" title="sitemap 配置"></a>sitemap 配置</h2><p>配图参上</p>
<p>作用：配置其小程序页面是否允许微信索引</p>
<h1 id="小程序基础"><a href="#小程序基础" class="headerlink" title="小程序基础"></a>小程序基础</h1><h2 id="框架接口"><a href="#框架接口" class="headerlink" title="框架接口"></a>框架接口</h2><p><img src="/img/md/wx9.png"></p>
<h3 id="App"><a href="#App" class="headerlink" title="App"></a>App</h3><ol>
<li>全局 app.js 中执行 App()</li>
<li>生成当前应用的实例对象</li>
<li>getApp()获取全局应用实例</li>
</ol>
<h3 id="Page"><a href="#Page" class="headerlink" title="Page"></a>Page</h3><ol>
<li>页面.js 中执行 Page()</li>
<li>生成当前页面的实例</li>
<li>通过 getCurrentPages() 获取页面实例</li>
</ol>
<h2 id="WXML-语法"><a href="#WXML-语法" class="headerlink" title="WXML 语法"></a>WXML 语法</h2><p><img src="/img/md/wx10.png"></p>
<p>具体看官方文档 ~</p>
<h3 id="ToDoList"><a href="#ToDoList" class="headerlink" title="ToDoList"></a>ToDoList</h3><p>todolist.wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;header-input&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">bindinput</span>=<span class="string">&quot;inputHandler&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#x27;&#123;&#123;text.title?text.title:&quot;&quot;&#125;&#125;&#x27;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">bindtap</span>=<span class="string">&quot;add&quot;</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;show&quot;</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;todoList.length &gt; 0&#125;&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;todoList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span>&#123;&#123;item.id + 1&#125;&#125;. &#123;&#123;item.title&#125;&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;warn&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">bindtap</span>=<span class="string">&quot;del&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span>暂无待办事项<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<p>todolist.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">todoList</span>: [</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">title</span>: <span class="string">&quot;吃饭&quot;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&quot;睡觉&quot;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&quot;打豆豆&quot;</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// 保存用户输入的数据</span></span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 用户输入数据后会触发的回调</span></span><br><span class="line">  <span class="title function_">inputHandler</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// 保存用户输入的数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">text</span>: &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todoList</span>.<span class="property">length</span>,</span><br><span class="line">        <span class="attr">title</span>: e.<span class="property">detail</span>.<span class="property">value</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 添加</span></span><br><span class="line">  <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 修改数据并且清空输入框</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todoList</span>: [...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todoList</span>, <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">text</span>],</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 删除</span></span><br><span class="line">  <span class="title function_">del</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// 获取传过来的索引</span></span><br><span class="line">    <span class="comment">// console.log(e.target.dataset.index)</span></span><br><span class="line">    <span class="keyword">var</span> index = e.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">index</span>;</span><br><span class="line">    <span class="comment">// 删除数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todoList</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// 只要修改了数据 一定要重新setData</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todoList</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todoList</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>todolist.wxss</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">container</span> &#123;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">    flex-<span class="attr">direction</span>: column;</span><br><span class="line">    align-<span class="attr">items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">header</span> &#123;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">    margin-<span class="attr">top</span>: 20rpx;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">header</span>-input &#123;</span><br><span class="line">    <span class="attr">height</span>: 64rpx;</span><br><span class="line">    line-<span class="attr">height</span>: 64rpx;</span><br><span class="line">    <span class="attr">border</span>: 1px solid #<span class="number">000</span>;</span><br><span class="line">    text-<span class="attr">align</span>: center;</span><br><span class="line">    margin-<span class="attr">right</span>: 20rpx;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">show</span> &#123;</span><br><span class="line">    margin-<span class="attr">top</span>: 20rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Tab"><a href="#Tab" class="headerlink" title="Tab"></a>Tab</h3><p>tab.wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">view</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">class</span>=<span class="string">&quot;tab &#123;&#123;index == current ? &#x27;active&#x27; : &#x27;&#x27;&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">bindtap</span>=<span class="string">&quot;changeCurrent&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;tabList&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  &gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<p>tab.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">tabList</span>: [<span class="string">&quot;首页&quot;</span>, <span class="string">&quot;购物车&quot;</span>, <span class="string">&quot;我的&quot;</span>],</span><br><span class="line">    <span class="attr">current</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">changeCurrent</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// 在事件处理函数中，通过 event.target.dataset.参数名 即可获取到具体参数的值</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">current</span>: e.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">index</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>tab.wxss</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">container</span> &#123;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">    justify-<span class="attr">content</span>: space-around;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">tab</span> &#123;</span><br><span class="line">    text-<span class="attr">align</span>: center;</span><br><span class="line">    <span class="attr">width</span>: 200rpx;</span><br><span class="line">    <span class="attr">border</span>: 1px solid black;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">active</span> &#123;</span><br><span class="line">    border-<span class="attr">bottom</span>: 2px solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="target-和-currentTarget-的区别？"><a href="#target-和-currentTarget-的区别？" class="headerlink" title="target 和 currentTarget 的区别？"></a>target 和 currentTarget 的区别？</h3><p>target 是触发该事件的源头组件，而 currentTarget 则是当前事件所绑定的组件</p>
<p><img src="/img/md/wx11.png"></p>
<p>点击内部的按钮时，点击事件以冒泡的方式向外扩散，也会触发外层 view 的 tap 事件处理函数。</p>
<p>此时，对于外层的 view 来说：</p>
<p>e.target 指向的是触发事件的源头组件，因此，e.target 是内部的按钮组件</p>
<p>e.currentTarget 指向的是当前正在触发事件的那个组件，因此，e.currentTarget 是当前的 view 组件</p>
<h2 id="WXSS-语法"><a href="#WXSS-语法" class="headerlink" title="WXSS 语法"></a>WXSS 语法</h2><p><img src="/img/md/wx12.png"></p>
<p>具体看官方文档 ~</p>
<h2 id="WXS-语法"><a href="#WXS-语法" class="headerlink" title="WXS 语法"></a>WXS 语法</h2><p><img src="/img/md/wx13.png"></p>
<p>具体看官方文档 ~</p>
<h3 id="这里补充一点，为什么有了-js-还要设计-wxs？"><a href="#这里补充一点，为什么有了-js-还要设计-wxs？" class="headerlink" title="这里补充一点，为什么有了 js 还要设计 wxs？"></a>这里补充一点，为什么有了 js 还要设计 wxs？</h3><h4 id="1、WXS-的基础类库"><a href="#1、WXS-的基础类库" class="headerlink" title="1、WXS 的基础类库"></a>1、WXS 的基础类库</h4><p>WXS 只提供给开发者 5 个基础类库，分别是 console，Math，JSON，Number，Date，以及一些常用的全局变量和全局函数，数量不多，但已经能满足基本的数据操作要求，而对于复杂的数据操作，比如类定义和继承等，还是需要依靠逻辑层的 JS 脚本完成。</p>
<h4 id="2、数组遍历"><a href="#2、数组遍历" class="headerlink" title="2、数组遍历"></a>2、数组遍历</h4><p>WXS 里，遍历数组只能通过 for 实现，而 JS 中的 for in 和 for of 不被支持，对于需要循环处理数据的场景，也可以通过数组的 forEach 方法实现遍历：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ary = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">ary.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">i</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="3、变量类型判断"><a href="#3、变量类型判断" class="headerlink" title="3、变量类型判断"></a>3、变量类型判断</h4><p>由于 WXS 先天不支持使用 Array 对象，因此我们平常用于判断数组类型变量的语句[] instanceof Array 也就不能使用了，而 typeof []的输出结果是”object”，并不能满足实际的开发要求。所幸我们还可以使用变量的 「constructor」属性进行类型判断：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[].<span class="property">constructor</span> === <span class="title class_">Array</span>; <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h4 id="4、性能差异"><a href="#4、性能差异" class="headerlink" title="4、性能差异"></a>4、性能差异</h4><p>小程序的架构分成了逻辑层和视图层，WXS 与 JavaScript 还有一个差异在于，它与 WXML 一同们于视图层，运行于同一个线程内，因此减少了跨线程通信的开销。这也是我们之所以优先采用 WXS 处理数据的原因之一</p>
<h4 id="5、平台差异"><a href="#5、平台差异" class="headerlink" title="5、平台差异"></a>5、平台差异</h4><p>小程序在 Android 上，使用 V8 引擎解析和渲染 JavaScript; 而在 iOS 上，则是使用 JavaScriptCore，这两者在解析性能的表现上差异比较大，相对来说 V8 的性能比 JSC 要好得多，那么在 IOS 的小程序中，使用脱离 JavaScript 环境的 WXS，就会使性能有更多的提升，这也是 WXS 文档中提及 “在 iOS 设备上小程序内的 wxs 会比 javascript 代码快 2 ~ 20 倍” 的具体原因</p>
<h5 id="FormatTime"><a href="#FormatTime" class="headerlink" title="FormatTime"></a>FormatTime</h5><p>dateFormat.wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 引入wxs文件 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">wxs</span> <span class="attr">src</span>=<span class="string">&#x27;./dateFormat.wxs&#x27;</span> <span class="attr">module</span>=<span class="string">&quot;aaa&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">wxs</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123;aaa(time)&#125;&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>dateFormat.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">time</span>: <span class="number">1646372333761</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>dateFormat.wxs</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">dateFormat</span>(<span class="params">time</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> newTime = <span class="title function_">getDate</span>(time);</span><br><span class="line">  <span class="keyword">var</span> year = newTime.<span class="title function_">getFullYear</span>();</span><br><span class="line">  <span class="keyword">var</span> month = newTime.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">var</span> date = newTime.<span class="title function_">getDate</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> year + <span class="string">&quot;-&quot;</span> + month + <span class="string">&quot;-&quot;</span> + date;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 将函数暴露</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = dateFormat;</span><br></pre></td></tr></table></figure>

<h5 id="Search"><a href="#Search" class="headerlink" title="Search"></a>Search</h5><p>search.wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;wxs src=<span class="string">&#x27;./search.wxs&#x27;</span> <span class="variable language_">module</span>=<span class="string">&quot;searchList&quot;</span>&gt;&lt;/wxs&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search-box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;search-input&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">bindinput</span>=<span class="string">&quot;getKeyWords&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;searchList(list, keyWords)&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123;item&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>search.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">list</span>: [<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;acd&quot;</span>, <span class="string">&quot;cdb&quot;</span>, <span class="string">&quot;xyz&quot;</span>, <span class="string">&quot;zxe&quot;</span>, <span class="string">&quot;qwe&quot;</span>, <span class="string">&quot;amd&quot;</span>, <span class="string">&quot;cmd&quot;</span>],</span><br><span class="line">    <span class="attr">keyWords</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">getKeyWords</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">keyWords</span>: e.<span class="property">detail</span>.<span class="property">value</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>search.wxs</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">search</span>(<span class="params">list, keyWords</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> list.<span class="title function_">filter</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> item.<span class="title function_">indexOf</span>(keyWords) &gt; -<span class="number">1</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = search;</span><br></pre></td></tr></table></figure>

<h2 id="数据请求"><a href="#数据请求" class="headerlink" title="数据请求"></a>数据请求</h2><p>例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">login</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// 请求自己后台登录接口</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">requestLoginApi</span> = (<span class="params">code</span>) =&gt; &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;http://localhost:3000/user/wexin-login2&#x27;</span>,</span><br><span class="line">      ...</span><br><span class="line">      <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> token = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">authorizationToken</span></span><br><span class="line">     wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;token&#x27;</span>, token)</span><br><span class="line">      <span class="title function_">onUserLogin</span>(token)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onUserLogin</span> = (<span class="params">token</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">token</span> = token</span><br><span class="line">  ...</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 检查当前微信登录状态是否有效</span></span><br><span class="line">wx.<span class="title function_">checkSession</span>(&#123;</span><br><span class="line">  <span class="title function_">success</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> token = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (token) <span class="title function_">onUserLogin</span>(token)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">fail</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 拉取微信用于登录鉴权的code</span></span><br><span class="line">    wx.<span class="title function_">login</span>(&#123;</span><br><span class="line">      <span class="title function_">success</span>(<span class="params">res0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (res0.<span class="property">code</span>) &#123;</span><br><span class="line">          <span class="title function_">requestLoginApi</span>(res0.<span class="property">code</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 从之前使用的wx.request接口使用方式可以看出来 所有小程序接口都有两个特征</span></span><br><span class="line"><span class="comment">// 1、参数是一个对象 可以让参数的定义与添加更加自由</span></span><br><span class="line"><span class="comment">// 2、拥有相同的调用结果处理方式 都有success、fail、complete三个回调属性</span></span><br></pre></td></tr></table></figure>

<h2 id="小程序组件"><a href="#小程序组件" class="headerlink" title="小程序组件"></a>小程序组件</h2><h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><h3 id="swiper"><a href="#swiper" class="headerlink" title="swiper"></a>swiper</h3><h3 id="scrollview"><a href="#scrollview" class="headerlink" title="scrollview"></a>scrollview</h3><p>scrollview.wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;height: 300rpx;background-color: aquamarine;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">    &lt;!--</span><br><span class="line">    <span class="attr">bindscrolltolower</span>: 滚动到底部/右边时触发</span><br><span class="line">    refresher-<span class="attr">enabled</span>: 开启下拉刷新</span><br><span class="line">    refresher-<span class="attr">triggered</span>: 下拉刷新状态</span><br><span class="line">    <span class="attr">bindrefresherrefresh</span>: 下拉刷新触发的回调</span><br><span class="line">    --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span>纵向scroll-view<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">    &lt;!-- 注意: 当开启scroll-y时 一定要给组件一个高度 子组件的高度之和一定要大于这个高度 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;sv&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">scroll-y</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">bindscrolltolower</span>=<span class="string">&quot;toLoewrHandler&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">refresher-enabled</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">refresher-triggered</span>=<span class="string">&quot;&#123;&#123;isReFresh&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">bindrefresherrefresh</span>=<span class="string">&quot;refreshHandler&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;swiperList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.imgUrl&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100vw;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span>横向scroll-view<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">    &lt;!--</span><br><span class="line">    enable-<span class="attr">flex</span>: 启用 flexbox 布局</span><br><span class="line">    scroll-<span class="attr">x</span>: 启用横向滚动</span><br><span class="line">    注意: 启用时要给组件一个宽度 一般这个值是<span class="number">100</span>%等于屏宽 子组件的宽度之和要大于屏宽</span><br><span class="line">    如果出现不滚动的现象尝试给容器添加这两个样式: white-<span class="attr">space</span>: nowrap; <span class="attr">display</span>:inline-block</span><br><span class="line">	目的是为了让子元素在横向上排列成一行</span><br><span class="line">     --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;sv2&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">enable-flex</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">scroll-x</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">bindscrolltolower</span>=<span class="string">&quot;toRightHandler&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;swiperList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.imgUrl&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100vw;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>scrollview.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">swiperList</span>: [],</span><br><span class="line">    <span class="attr">isReFresh</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">toRightHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/getProductList&quot;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; data &#125; = result;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="comment">// 实现上拉加载的效果</span></span><br><span class="line">          <span class="comment">// 在之前的数据数组中追加新的数据</span></span><br><span class="line">          <span class="attr">swiperList</span>: [...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">swiperList</span>, ...data],</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">refreshHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/getProductList&quot;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; data &#125; = result;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="comment">// 实现上拉加载的效果</span></span><br><span class="line">          <span class="comment">// 在之前的数据数组中追加新的数据</span></span><br><span class="line">          <span class="attr">swiperList</span>: [...data, ...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">swiperList</span>],</span><br><span class="line">          <span class="attr">isReFresh</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">toLoewrHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/getProductList&quot;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; data &#125; = result;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="comment">// 实现上拉加载的效果</span></span><br><span class="line">          <span class="comment">// 在之前的数据数组中追加新的数据</span></span><br><span class="line">          <span class="attr">swiperList</span>: [...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">swiperList</span>, ...data],</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/getProductList&quot;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; data &#125; = result;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">swiperList</span>: data,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>scrollview.wxss</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">sv</span> &#123;</span><br><span class="line">    margin-<span class="attr">top</span>: 20rpx;</span><br><span class="line">    <span class="attr">height</span>: 300rpx;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">item</span> &#123;</span><br><span class="line">    <span class="attr">height</span>: 300rpx;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">sv2</span> &#123;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">item2</span> &#123;</span><br><span class="line">    <span class="attr">width</span>: 400rpx;</span><br><span class="line">    flex-<span class="attr">shrink</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="rich-text"><a href="#rich-text" class="headerlink" title="rich-text"></a>rich-text</h3><p>rich-text.wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">    &lt;!-- <span class="attr">emsp</span>: 中文字符空格大小 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">rich-text</span> <span class="attr">space</span>=<span class="string">&quot;emsp&quot;</span> <span class="attr">nodes</span>=<span class="string">&quot;&#123;&#123;nodes&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;tap&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">rich-text</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span>=====================<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-body&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section-title&quot;</span>&gt;</span>通过HTML String渲染<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">rich-text</span> <span class="attr">nodes</span>=<span class="string">&quot;&#123;&#123;htmlSnip&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">rich-text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>rich-text.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="comment">// name: 表示节点名称</span></span><br><span class="line">    <span class="comment">// attrs: 节点属性</span></span><br><span class="line">    <span class="comment">// class: 类名</span></span><br><span class="line">    <span class="comment">// style: 样式</span></span><br><span class="line">    <span class="attr">nodes</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;div&quot;</span>,</span><br><span class="line">        <span class="attr">attrs</span>: &#123;</span><br><span class="line">          <span class="attr">class</span>: <span class="string">&quot;div_class&quot;</span>,</span><br><span class="line">          <span class="attr">style</span>: <span class="string">&quot;line-height: 20px;padding:20px;&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// text文本节点</span></span><br><span class="line">            <span class="comment">// 注: 如果不是text节点 则必须有一个name属性</span></span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&quot;⼩程序实践&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// 图片节点</span></span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;img&quot;</span>,</span><br><span class="line">            <span class="attr">attrs</span>: &#123;</span><br><span class="line">              <span class="attr">src</span>: <span class="string">&quot;https://img.mukewang.com/620324d409be395b18000600.png&quot;</span>,</span><br><span class="line">              <span class="comment">// 解决图片缝隙问题</span></span><br><span class="line">              <span class="comment">// 小程序不允许外部修改内部的img样式 我们可以修改node节点img样式</span></span><br><span class="line">              <span class="comment">// style: &#x27;width:100%;font-size:0;display:block;&#x27;</span></span><br><span class="line">              <span class="attr">class</span>: <span class="string">&quot;img&quot;</span>,</span><br><span class="line"></span><br><span class="line">              <span class="comment">// rich-text.wxss</span></span><br><span class="line">              <span class="comment">// .img&#123;</span></span><br><span class="line">              <span class="comment">// font-size:0;</span></span><br><span class="line">              <span class="comment">// display:block;</span></span><br><span class="line">              <span class="comment">// &#125;</span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;img&quot;</span>,</span><br><span class="line">            <span class="attr">attrs</span>: &#123;</span><br><span class="line">              <span class="attr">src</span>: <span class="string">&quot;https://img.mukewang.com/620c5ea509a1cbb118000600.png&quot;</span>,</span><br><span class="line">              <span class="attr">style</span>: <span class="string">&quot;width:100%&quot;</span>,</span><br><span class="line">              <span class="attr">class</span>: <span class="string">&quot;img&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;img&quot;</span>,</span><br><span class="line">            <span class="attr">attrs</span>: &#123;</span><br><span class="line">              <span class="attr">src</span>: <span class="string">&quot;https://img.mukewang.com/61f0a258093f8c1018000600.png&quot;</span>,</span><br><span class="line">              <span class="attr">style</span>: <span class="string">&quot;width:100%&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">urls</span>: [],</span><br><span class="line">    <span class="attr">htmlSnip</span>: <span class="string">`&lt;div class=&quot;div_class&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;h1&gt;Title&lt;/h1&gt;</span></span><br><span class="line"><span class="string">        &lt;p class=&quot;p&quot;&gt;</span></span><br><span class="line"><span class="string">          渲染出来了 ~</span></span><br><span class="line"><span class="string">        &lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      `</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onReady</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 取出 urls</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">findUrl</span>(<span class="params">nodes</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> urls = [];</span><br><span class="line">      nodes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 如果有attrs属性</span></span><br><span class="line">        <span class="keyword">if</span> (item.<span class="property">attrs</span>) &#123;</span><br><span class="line">          <span class="comment">// 遍历attrs属性</span></span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> item.<span class="property">attrs</span>) &#123;</span><br><span class="line">            <span class="comment">// 如果键是src</span></span><br><span class="line">            <span class="keyword">if</span> (key == <span class="string">&quot;src&quot;</span>) &#123;</span><br><span class="line">              <span class="comment">// 保存到数组中</span></span><br><span class="line">              urls.<span class="title function_">push</span>(item.<span class="property">attrs</span>[key]);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 判断有没有字节点</span></span><br><span class="line">        <span class="keyword">if</span> (item.<span class="property">children</span>) &#123;</span><br><span class="line">          <span class="comment">// 如果有则递归调用</span></span><br><span class="line">          <span class="comment">// 将返回的结果合并到上一个数组中</span></span><br><span class="line">          urls = urls.<span class="title function_">concat</span>(<span class="title function_">findUrl</span>(item.<span class="property">children</span>));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> urls;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">urls</span> = <span class="title function_">findUrl</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">nodes</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 点击图片实现预览</span></span><br><span class="line">  <span class="title function_">tap</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// 鼠标点击的位置 / 图片的高度 =&gt; 向下取整作为urls的下标</span></span><br><span class="line">    <span class="keyword">let</span> index = <span class="title class_">Math</span>.<span class="title function_">floor</span>(e.<span class="property">detail</span>.<span class="property">y</span> / <span class="number">134</span>);</span><br><span class="line">    <span class="keyword">let</span> urls = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">urls</span>;</span><br><span class="line">    wx.<span class="title function_">previewImage</span>(&#123;</span><br><span class="line">      <span class="comment">// 当前图片</span></span><br><span class="line">      <span class="attr">current</span>: urls[index],</span><br><span class="line">      <span class="comment">// 图片数组</span></span><br><span class="line">      <span class="attr">urls</span>: urls,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="icon"><a href="#icon" class="headerlink" title="icon"></a>icon</h3><h3 id="progress"><a href="#progress" class="headerlink" title="progress"></a>progress</h3><p>wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;progress-container&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;progress-box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">progress</span> <span class="attr">class</span>=<span class="string">&quot;mt&quot;</span> <span class="attr">percent</span>=<span class="string">&#x27;&#123;&#123;percentValue&#125;&#125;&#x27;</span> <span class="attr">border-radius</span>=<span class="string">&#x27;50&#x27;</span> <span class="attr">stroke-width</span>=<span class="string">&#x27;10&#x27;</span> <span class="attr">active</span> <span class="attr">active-mode</span>=<span class="string">&quot;forwards&quot;</span> <span class="attr">bindactiveend</span>=<span class="string">&#x27;complete&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">progress</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;icons&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">class</span>=<span class="string">&quot;progress-cancel&quot;</span> <span class="attr">type</span>=<span class="string">&quot;cancel&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;cancel&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">icon</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">class</span>=<span class="string">&quot;progress-cancel&quot;</span> <span class="attr">type</span>=<span class="string">&quot;download&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;download&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">icon</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;isShow&#125;&#125;&quot;</span>&gt;</span>下载完成<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;isShow2&#125;&#125;&quot;</span>&gt;</span>暂停下载<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">percentValue</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">isShow</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">isShow2</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 动画完成</span></span><br><span class="line">  <span class="title function_">complete</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">detail</span>.<span class="property">curPercent</span> &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">isShow</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 暂停动画</span></span><br><span class="line">  <span class="title function_">cancel</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timeId</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">isShow2</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 继续下载</span></span><br><span class="line">  <span class="title function_">download</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timeId</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timeId</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">percentValue</span> &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timeId</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">isShow2</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">percentValue</span>: (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">percentValue</span> += <span class="number">10</span>),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, <span class="number">500</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onReady</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timeId</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">percentValue</span> &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timeId</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">isShow2</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">percentValue</span>: (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">percentValue</span> += <span class="number">10</span>),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, <span class="number">500</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>wxss</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">progress</span>-container &#123;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">95</span>%;</span><br><span class="line">    <span class="attr">height</span>: <span class="number">20</span>%;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">progress</span>-box &#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">100</span>%;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">icons</span> &#123;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="movable-view"><a href="#movable-view" class="headerlink" title="movable-view"></a>movable-view</h3><h4 id="左滑删除实现"><a href="#左滑删除实现" class="headerlink" title="左滑删除实现"></a>左滑删除实现</h4><p>wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 左滑删除<span class="number">1</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section-title&quot;</span>&gt;</span>左侧删除1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">movable-area</span> <span class="attr">style</span>=<span class="string">&quot;width:750rpx;height:100rpx;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">movable-view</span> <span class="attr">style</span>=<span class="string">&quot;width:1050rpx;height:100rpx;&quot;</span> <span class="attr">direction</span>=<span class="string">&quot;horizontal&quot;</span> <span class="attr">class</span>=<span class="string">&quot;max&quot;</span> <span class="attr">direction</span>=<span class="string">&quot;all&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>这⾥是插⼊到组内容 1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;read&quot;</span>&gt;</span>已读<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">movable-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">movable-area</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- 左滑删除<span class="number">2</span> 使用第三方模块 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section-title&quot;</span>&gt;</span>左侧删除2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">slide-view</span> <span class="attr">class</span>=<span class="string">&quot;slide&quot;</span> <span class="attr">width</span>=<span class="string">&quot;750&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100&quot;</span> <span class="attr">slideWidth</span>=<span class="string">&quot;300&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span> <span class="attr">slot</span>=<span class="string">&quot;left&quot;</span>&gt;</span>这⾥是插⼊到组内容 2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span> <span class="attr">slot</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;read&quot;</span>&gt;</span>已读<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">slide-view</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- 左滑删除<span class="number">3</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section-title&quot;</span>&gt;</span>左侧删除3<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page__bd&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;weui-cells&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">mp-slideview</span> <span class="attr">ext-class</span>=<span class="string">&quot;slideViewClass&quot;</span> <span class="attr">buttons</span>=<span class="string">&quot;&#123;&#123;slideButtons&#125;&#125;&quot;</span> <span class="attr">bindbuttontap</span>=<span class="string">&quot;slideButtonTap&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">mp-cell</span> <span class="attr">value</span>=<span class="string">&quot;标题文字&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mp-cell</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">mp-slideview</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;weui-cells&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">mp-slideview</span> <span class="attr">buttons</span>=<span class="string">&quot;&#123;&#123;slideButtons&#125;&#125;&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span> <span class="attr">bindbuttontap</span>=<span class="string">&quot;slideButtonTap&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;weui-slidecell&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    左滑可以删除（图标Button）</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">mp-slideview</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> base64 = <span class="built_in">require</span>(<span class="string">&quot;../../images/base64&quot;</span>);</span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">widget</span> = <span class="variable language_">this</span>.<span class="title function_">selectComponent</span>(<span class="string">&quot;.widget&quot;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">icon</span>: base64.<span class="property">icon20</span>,</span><br><span class="line">      <span class="attr">slideButtons</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">text</span>: <span class="string">&quot;普通1&quot;</span>,</span><br><span class="line">          <span class="attr">src</span>: <span class="string">&quot;/images/icon_love.svg&quot;</span>, <span class="comment">// icon的路径</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">text</span>: <span class="string">&quot;普通2&quot;</span>,</span><br><span class="line">          <span class="attr">extClass</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">          <span class="attr">src</span>: <span class="string">&quot;/images/icon_star.svg&quot;</span>, <span class="comment">// icon的路径</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">          <span class="attr">text</span>: <span class="string">&quot;警示3&quot;</span>,</span><br><span class="line">          <span class="attr">extClass</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">          <span class="attr">src</span>: <span class="string">&quot;/images/icon_del.svg&quot;</span>, <span class="comment">// icon的路径</span></span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>json</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;slide-view&quot;</span>: <span class="string">&quot;miniprogram-slide-view&quot;</span>,</span><br><span class="line">    <span class="string">&quot;mp-slideview&quot;</span>: <span class="string">&quot;weui-miniprogram/slideview/slideview&quot;</span>,</span><br><span class="line">    <span class="string">&quot;mp-cell&quot;</span>: <span class="string">&quot;weui-miniprogram/cell/cell&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>wxss</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">movable-view &#123;</span><br><span class="line">  <span class="attr">display</span>: flex;</span><br><span class="line">  align-<span class="attr">items</span>: center;</span><br><span class="line">  justify-<span class="attr">content</span>: center;</span><br><span class="line">  <span class="attr">height</span>: 100rpx;</span><br><span class="line">  <span class="attr">width</span>: 100rpx;</span><br><span class="line">  <span class="attr">background</span>: #1AAD19;</span><br><span class="line">  <span class="attr">color</span>: #fff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">movable-area &#123;</span><br><span class="line">  <span class="attr">height</span>: 400rpx;</span><br><span class="line">  <span class="attr">width</span>: 400rpx;</span><br><span class="line">  background-<span class="attr">color</span>: #ccc;</span><br><span class="line">  <span class="attr">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">max</span> &#123;</span><br><span class="line">  <span class="attr">width</span>: 600rpx;</span><br><span class="line">  <span class="attr">height</span>: 600rpx;</span><br><span class="line">  background-<span class="attr">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 左滑删除1 */</span></span><br><span class="line">.<span class="property">list_item</span> &#123;</span><br><span class="line">  <span class="attr">display</span>: flex;</span><br><span class="line">  border-<span class="attr">bottom</span>: 1px solid #<span class="variable constant_">DEDEDE</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 左侧删除2 */</span></span><br><span class="line">.<span class="property">slide</span>&#123;</span><br><span class="line">  <span class="comment">/* border-top:1px solid #ccc; */</span></span><br><span class="line">  border-<span class="attr">bottom</span>:1px solid #<span class="variable constant_">DEDEDE</span>;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">left</span> &#123;</span><br><span class="line">  background-<span class="attr">color</span>: white;</span><br><span class="line">  <span class="attr">height</span>: 100rpx;</span><br><span class="line">  <span class="attr">width</span>: 750rpx;</span><br><span class="line">  <span class="attr">display</span>: flex;</span><br><span class="line">  flex-<span class="attr">direction</span>: row;</span><br><span class="line">  <span class="attr">color</span>: grey;</span><br><span class="line">  line-<span class="attr">height</span>: 100rpx;</span><br><span class="line">  padding-<span class="attr">left</span>: 30rpx;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">right</span> &#123;</span><br><span class="line">  <span class="attr">height</span>: <span class="number">100</span>;</span><br><span class="line">  <span class="attr">display</span>: flex;</span><br><span class="line">  <span class="attr">direction</span>: row;</span><br><span class="line">  text-<span class="attr">align</span>: center;</span><br><span class="line">  vertical-<span class="attr">align</span>: middle;</span><br><span class="line">  line-<span class="attr">height</span>: 110rpx;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">read</span> &#123;</span><br><span class="line">  background-<span class="attr">color</span>: #ccc;</span><br><span class="line">  <span class="attr">color</span>: #fff;</span><br><span class="line">  <span class="attr">width</span>: 150rpx;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">delete</span> &#123;</span><br><span class="line">  background-<span class="attr">color</span>: red;</span><br><span class="line">  <span class="attr">color</span>: #fff;</span><br><span class="line">  <span class="attr">width</span>: 150rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  */</span></span><br><span class="line">.<span class="property">slideViewClass</span> .<span class="property">weui</span>-cell&#123;</span><br><span class="line">  <span class="attr">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="shopCar"><a href="#shopCar" class="headerlink" title="shopCar"></a>shopCar</h3><p>wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;wxs src=<span class="string">&#x27;./getSum.wxs&#x27;</span> <span class="variable language_">module</span>=<span class="string">&quot;getSum&quot;</span>&gt;&lt;/wxs&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;productList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">checkbox</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">checked</span>=<span class="string">&quot;&#123;&#123;item.isChecked&#125;&#125;&quot;</span> <span class="attr">catchtap</span>=<span class="string">&quot;clickHandler&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">data-index</span>=<span class="string">&#x27;&#123;&#123;index&#125;&#125;&#x27;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item.price&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item.number&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;total&quot;</span>&gt;</span>总价: &#123;&#123;getSum(productList)&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">productList</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;白象方便面&quot;</span>,</span><br><span class="line">        <span class="attr">price</span>: <span class="number">50</span>,</span><br><span class="line">        <span class="attr">number</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">isChecked</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;鸿星尔克哈&quot;</span>,</span><br><span class="line">        <span class="attr">price</span>: <span class="number">99</span>,</span><br><span class="line">        <span class="attr">number</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">isChecked</span>: <span class="literal">false</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;卫龙辣条哈&quot;</span>,</span><br><span class="line">        <span class="attr">price</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">number</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">isChecked</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&quot;4&quot;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;德芙巧克力&quot;</span>,</span><br><span class="line">        <span class="attr">price</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">number</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">isChecked</span>: <span class="literal">false</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">clickHandler</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// 获取页面传来的index</span></span><br><span class="line">    <span class="keyword">let</span> index = e.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">index</span>;</span><br><span class="line">    <span class="comment">// 找到数组中对应index数据 对其isChecked属性进行取反操作</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">productList</span>[index].<span class="property">isChecked</span> =</span><br><span class="line">      !<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">productList</span>[index].<span class="property">isChecked</span>;</span><br><span class="line">    <span class="comment">// 更新数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">productList</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">productList</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>wxs</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getSum</span>(<span class="params">productList</span>) &#123;</span><br><span class="line">  <span class="comment">// 目前仅支持es5的语法</span></span><br><span class="line">  <span class="keyword">var</span> total = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; productList.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 如果商品被选中</span></span><br><span class="line">    <span class="keyword">if</span> (productList[i].<span class="property">isChecked</span>) &#123;</span><br><span class="line">      <span class="comment">// 计算总价</span></span><br><span class="line">      total += productList[i].<span class="property">price</span> * productList[i].<span class="property">number</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> total;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 暴露</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = getSum;</span><br></pre></td></tr></table></figure>

<p>wxss</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">list</span> &#123;</span><br><span class="line">    padding-<span class="attr">left</span>: 100rpx;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">item</span> &#123;</span><br><span class="line">    margin-<span class="attr">left</span>: 40rpx;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">total</span> &#123;</span><br><span class="line">    padding-<span class="attr">left</span>: 100rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h2><h3 id="selfComponent"><a href="#selfComponent" class="headerlink" title="selfComponent"></a>selfComponent</h3><p>wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">navbar</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">parentList</span>=<span class="string">&#x27;&#123;&#123;[&quot;电影&quot;,&quot;综艺&quot;, &quot;科幻&quot;]&#125;&#125;&#x27;</span> <span class="attr">parentCurrent</span>=<span class="string">&quot;&#123;&#123;parentCurrent&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">bind:parentEvent</span>=<span class="string">&quot;parentEvent&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">navbar</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">swiper</span>  <span class="attr">bindchange</span>=<span class="string">&#x27;changeHandler&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">current</span>=<span class="string">&quot;&#123;&#123;parentCurrent&#125;&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span>电影<span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span>综艺<span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span>科幻<span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">parentCurrent</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">changeHandler</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// 获取轮播图当前所在的index</span></span><br><span class="line">    <span class="keyword">const</span> &#123; current &#125; = e.<span class="property">detail</span>;</span><br><span class="line">    <span class="comment">// 保存index</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">parentCurrent</span>: current,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">parentEvent</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// e.detail: 子组件传过来的参数</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">parentCurrent</span>: e.<span class="property">detail</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>json</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;navbar&quot;</span>: <span class="string">&quot;../../components/navbar/navbar&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>wxss</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">swiper &#123;</span><br><span class="line">    margin-<span class="attr">top</span>: 40rpx;</span><br><span class="line">    text-<span class="attr">align</span>: center;</span><br><span class="line">    line-<span class="attr">height</span>: 280rpx;</span><br><span class="line">    background-<span class="attr">color</span>: chartreuse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="navbar"><a href="#navbar" class="headerlink" title="navbar"></a>navbar</h3><p>wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">view</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;parentList&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">class</span>=<span class="string">&quot;&#123;&#123;parentCurrent==index?&#x27;active&#x27;:&#x27;&#x27;&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">bindtap</span>=<span class="string">&quot;clickHandler&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  &gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; item &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<p>js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的属性列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="attr">parentList</span>: &#123;</span><br><span class="line">      <span class="comment">// 类型检测</span></span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Array</span>,</span><br><span class="line">      <span class="comment">// 默认值</span></span><br><span class="line">      <span class="attr">default</span>: [<span class="string">&quot;笔记本&quot;</span>, <span class="string">&quot;手机&quot;</span>, <span class="string">&quot;平板&quot;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">parentCurrent</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="comment">// list: [&quot;笔记本&quot;, &quot;手机&quot;, &quot;平板&quot;],</span></span><br><span class="line">    <span class="comment">// current: 0</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的方法列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="comment">// clickHandler(e)&#123;</span></span><br><span class="line">    <span class="comment">//     this.setData(&#123;</span></span><br><span class="line">    <span class="comment">//         current: e.currentTarget.dataset.index</span></span><br><span class="line">    <span class="comment">//     &#125;)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 不能再使用上面方式修改数据了</span></span><br><span class="line">    <span class="comment">// 因为页面上使用的是父级传过来的parentCurrent</span></span><br><span class="line">    <span class="comment">// 所以我们要通知父级 让父级去修改数据</span></span><br><span class="line">    <span class="title function_">clickHandler</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&quot;parentEvent&quot;</span>, e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>wxss</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">container</span> &#123;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">    justify-<span class="attr">content</span>: space-around;</span><br><span class="line">    text-<span class="attr">align</span>: center;</span><br><span class="line">    <span class="attr">height</span>: 100rpx;</span><br><span class="line">    line-<span class="attr">height</span>: 100rpx;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">active</span> &#123;</span><br><span class="line">    <span class="attr">color</span>: red</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="slot-插槽"><a href="#slot-插槽" class="headerlink" title="slot 插槽"></a>slot 插槽</h2><p>header.wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<p>header.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="attr">options</span>: &#123;</span><br><span class="line">    <span class="comment">// 在组件定义时的选项中启用多slot支持</span></span><br><span class="line">    <span class="attr">multipleSlots</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>header.wxss</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">box</span> &#123;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">    justify-<span class="attr">content</span>: space-between;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将上面组件引入到页面中使用</p>
<p>slot.wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">slot</span>=<span class="string">&quot;left&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;tapHandler&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      返回</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">slot</span>=<span class="string">&quot;right&quot;</span>&gt;</span>个人<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;isCreated&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<p>slot.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">isCreated</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">tapHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">isCreated</span>: !<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">isCreated</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>slot.json</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;header&quot;</span>: <span class="string">&quot;../../components/header/header&quot;</span>,</span><br><span class="line">    <span class="string">&quot;footer&quot;</span>: <span class="string">&quot;../../components/footer/footer&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="组件的生命周期"><a href="#组件的生命周期" class="headerlink" title="组件的生命周期"></a>组件的生命周期</h2><p><img src="/img/md/wx14.png"></p>
<p>count.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">5</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">lifetimes</span>: &#123;</span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 在组件实例进入页面节点树时执行</span></span><br><span class="line">    <span class="title function_">attached</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 开启定时器</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">timeId</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span> == <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="comment">// 通知父组件移除子组件</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&quot;removeTimeId&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">count</span>: (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span> -= <span class="number">1</span>),</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 在组件实例被从页面节点树移除时执行</span></span><br><span class="line">    <span class="title function_">detached</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timeId</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="路由跳转"><a href="#路由跳转" class="headerlink" title="路由跳转"></a>路由跳转</h2><p><img src="/img/md/wx15.png"></p>
<h2 id="页面生命周期"><a href="#页面生命周期" class="headerlink" title="页面生命周期"></a>页面生命周期</h2><p><img src="/img/md/wx16.png"></p>
<p>wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">  &#123;&#123; msg &#125;&#125;</span><br><span class="line">  &lt;button type=<span class="string">&quot;primary&quot;</span> bindtap=<span class="string">&quot;clickHandler&quot;</span>&gt;</span><br><span class="line">    跳转</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<p>js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;若有诗书藏于心 岁月从不败美人&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">clickHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面。使用 wx.navigateBack 可以返回到原页面。小程序中页面栈最多十层</span></span><br><span class="line">    wx.<span class="title function_">redirectTo</span>(&#123;</span><br><span class="line">      <span class="comment">// ?id=2 路由传参</span></span><br><span class="line">      <span class="comment">// 通过onload的形参options接收该参数</span></span><br><span class="line">      <span class="attr">url</span>: <span class="string">&quot;/pages/07-shopcar/07-shopcar?id=2&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;监听页面加载&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReady</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;监听页面初次渲染完成&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShow</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;监听页面显示&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面隐藏</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onHide</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;监听页面隐藏&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面卸载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onUnload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;监听页面卸载&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="获取用户信息"><a href="#获取用户信息" class="headerlink" title="获取用户信息"></a>获取用户信息</h2><p>getUserInfo.wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 40rpx;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">bindtap</span>=<span class="string">&quot;getUserInfo&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;!userInfo.avatarUrl&#125;&#125;&quot;</span>&gt;</span>获取用户信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;userInfo.avatarUrl&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;userInfo.nickName&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 40rpx;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">open-type</span>=<span class="string">&quot;share&quot;</span>&gt;</span>分享当前页<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    &lt;!-- <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 40rpx;&quot;</span> <span class="attr">open-type</span>=<span class="string">&quot;getUserInfo&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">bindgetuserinfo</span>=<span class="string">&quot;getUserInfo&quot;</span>&gt;</span>获取用户信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span> --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 40rpx;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">open-type</span>=<span class="string">&quot;getPhoneNumber&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">bindgetphonenumber</span>=<span class="string">&quot;getPhoneNumber&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span>获取用户电话<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span> --&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<p>getUserInfo.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">userInfo</span>: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">getUserInfo</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    wx.<span class="title function_">getUserProfile</span>(&#123;</span><br><span class="line">      <span class="attr">desc</span>: <span class="string">&quot;desc&quot;</span>,</span><br><span class="line">      <span class="attr">lang</span>: <span class="string">&quot;zh_CN&quot;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">userInfo</span>: res.<span class="property">userInfo</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 将用户信息保存到本地缓存中</span></span><br><span class="line">        wx.<span class="title function_">setStorageSync</span>(<span class="string">&quot;userInfo&quot;</span>, res.<span class="property">userInfo</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// getPhoneNumber(phone)&#123;</span></span><br><span class="line">  <span class="comment">//     console.log(phone)</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="comment">// 每次加载页面从本地缓存中取出用户数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">userInfo</span>: wx.<span class="title function_">getStorageSync</span>(<span class="string">&quot;userInfo&quot;</span>),</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onPullDownRefresh</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;监听用户下拉动作&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReachBottom</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;上拉触底&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户点击右上角分享</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShareAppMessage</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">from</span> == <span class="string">&quot;button&quot;</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">111</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.<span class="property">from</span> == <span class="string">&quot;menu&quot;</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">222</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;好兄弟帮忙砍一刀&quot;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/pages/12-getUserInfo/12-getUserInfo&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>getUserInfo.wxss</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">container</span> &#123;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">    flex-<span class="attr">direction</span>: column;</span><br><span class="line">    align-<span class="attr">items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">box</span> &#123;</span><br><span class="line">    margin-<span class="attr">top</span>: 100rpx;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">    flex-<span class="attr">direction</span>: column;</span><br><span class="line">    align-<span class="attr">items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">box</span> image &#123;</span><br><span class="line">    <span class="attr">width</span>: 200rpx;</span><br><span class="line">    <span class="attr">height</span>: 200rpx;</span><br><span class="line">    border-<span class="attr">radius</span>: 100rpx;</span><br><span class="line">    margin-<span class="attr">bottom</span>: 40rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="获取用户-openId"><a href="#获取用户-openId" class="headerlink" title="获取用户 openId"></a>获取用户 openId</h2><p>openId.wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;container&quot;</span> style=<span class="string">&quot;padding-top: 40rpx;&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;tapHandler&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    获取用户code</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<p>openId.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">// 获取用户的code</span></span><br><span class="line">  <span class="title function_">tapHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">login</span>(&#123;</span><br><span class="line">      <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">code</span>) &#123;</span><br><span class="line">          wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&quot;http://localhost:3000/getOpenId&quot;</span>,</span><br><span class="line">            <span class="attr">data</span>: &#123; <span class="attr">code</span>: res.<span class="property">code</span> &#125;,</span><br><span class="line">            <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">              wx.<span class="title function_">setStorageSync</span>(<span class="string">&quot;token&quot;</span>, res.<span class="property">data</span>);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 后端如何处理code？代码如下 要求了解</span></span><br><span class="line">  <span class="comment">// 获取openId</span></span><br><span class="line">  <span class="comment">// app.use(&#x27;/getOpenId&#x27;, async (req, res, next) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//     const CODE = req.query.code</span></span><br><span class="line">  <span class="comment">//     const APPID = &quot;wx13bb6e5496ae00d3&quot;</span></span><br><span class="line">  <span class="comment">//     const APPSECRET =    &quot;c72598c06ee2fc7f167923c3dfa3f116&quot;</span></span><br><span class="line">  <span class="comment">//     let url = `https://api.weixin.qq.com/sns/    jscode2session?appid=$&#123;APPID&#125;&amp;secret=$&#123;APPSECRET&#125;&amp;  js_code=$&#123;CODE&#125;&amp;grant_type=authorization_code`</span></span><br><span class="line">  <span class="comment">//     // 发起请求获取openId</span></span><br><span class="line">  <span class="comment">//     const &#123;data&#125; = await fly.get(&#123;url&#125;)</span></span><br><span class="line">  <span class="comment">//     // 反序列化 data</span></span><br><span class="line">  <span class="comment">//     let openId = JSON.parse(data).openid</span></span><br><span class="line">  <span class="comment">//     // 自定义登录态 =&gt; 将openId和用户信息进行关联</span></span><br><span class="line">  <span class="comment">//     let obj = &#123;</span></span><br><span class="line">  <span class="comment">//       name: &#x27;许&#x27;,</span></span><br><span class="line">  <span class="comment">//       age: 18,</span></span><br><span class="line">  <span class="comment">//       openId</span></span><br><span class="line">  <span class="comment">//     &#125;</span></span><br><span class="line">  <span class="comment">//     // 对登录态进行加密 jsonwebtoken</span></span><br><span class="line">  <span class="comment">//     let token = jwt.sign(obj, &#x27;bgs2012A&#x27;)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//     let verifyObj = jwt.verify(token, &#x27;bgs2012A&#x27;)</span></span><br><span class="line">  <span class="comment">//     console.log(verifyObj)</span></span><br><span class="line">  <span class="comment">//     // &#123;</span></span><br><span class="line">  <span class="comment">//     //   name: &#x27;许&#x27;,</span></span><br><span class="line">  <span class="comment">//     //   age: 18,</span></span><br><span class="line">  <span class="comment">//     //   openId: &#x27;oZmUB41o1l8nTYRvDg0NXBYVaUdk&#x27;,</span></span><br><span class="line">  <span class="comment">//     //   iat: 1646789558</span></span><br><span class="line">  <span class="comment">//     // &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//     res.send(token)</span></span><br><span class="line">  <span class="comment">//   &#125;)</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="小程序开放能力"><a href="#小程序开放能力" class="headerlink" title="小程序开放能力"></a>小程序开放能力</h1><h2 id="小程序连接-wifi"><a href="#小程序连接-wifi" class="headerlink" title="小程序连接 wifi"></a>小程序连接 wifi</h2><p>wxml</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;page-head&quot;</span>&gt;</span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;page-head__title&quot;</span>&gt;</span>微信连wifi<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;page-head__desc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;page-section__title&quot;</span>&gt;</span>3.15<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btn-area&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;startToConnect&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>连接<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> connectWifi <span class="keyword">from</span> <span class="string">&quot;../../lib/connect-wifi&quot;</span>;</span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">startToConnect</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">connectWifi</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;startToConnect result&quot;</span>, res);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>wifi-connect.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">connectWifi</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> ssid = <span class="string">&quot;201&quot;</span>,</span><br><span class="line">    pass = <span class="string">&quot;123456789&quot;</span>;</span><br><span class="line">  <span class="comment">// 查看平台环境</span></span><br><span class="line">  <span class="keyword">let</span> sysInfo = wx.<span class="title function_">getSystemInfoSync</span>();</span><br><span class="line">  <span class="keyword">let</span> platform = sysInfo.<span class="property">platform</span>;</span><br><span class="line">  <span class="comment">// devtools/android/ios</span></span><br><span class="line">  <span class="comment">// ios:iOS 10.0.1</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;platform&quot;</span>, platform, sysInfo.<span class="property">system</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 只有ios 11以上，及andoird 6以上，才有这样的wifi连接功能</span></span><br><span class="line">  <span class="keyword">if</span> (platform == <span class="string">&quot;android&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">// android 6.21</span></span><br><span class="line">    <span class="keyword">let</span> sysVersion = <span class="built_in">parseInt</span>(sysInfo.<span class="property">system</span>.<span class="title function_">substr</span>(<span class="number">8</span>));</span><br><span class="line">    <span class="keyword">if</span> (sysVersion &lt; <span class="number">6</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;android版本低&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> res0 = <span class="keyword">await</span> wx.<span class="property">wxp</span></span><br><span class="line">      .<span class="title function_">getSetting</span>(&#123;</span><br><span class="line">        <span class="comment">// 是否同时获取用户订阅消息的订阅状态，默认不获取。注意：withSubscriptions 只返回用户勾选过订阅面板中的“总是保持以上选择，不再询问”的订阅消息</span></span><br><span class="line">        <span class="attr">withSubscriptions</span>: <span class="literal">false</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err&quot;</span>, err);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`运行错误：<span class="subst">$&#123;err&#125;</span>`</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="comment">// 检查是否有地理位置授权</span></span><br><span class="line">    <span class="keyword">if</span> (res0 &amp;&amp; !res0.<span class="property">authSetting</span>[<span class="string">&quot;scope.userLocation&quot;</span>]) &#123;</span><br><span class="line">      <span class="comment">// 如果没有这个权限，先授权</span></span><br><span class="line">      <span class="keyword">let</span> authRes = <span class="keyword">await</span> wx.<span class="property">wxp</span></span><br><span class="line">        .<span class="title function_">authorize</span>(&#123;</span><br><span class="line">          <span class="attr">scope</span>: <span class="string">&quot;scope.userLocation&quot;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err&quot;</span>, err);</span><br><span class="line">          <span class="keyword">return</span> <span class="string">`运行错误：<span class="subst">$&#123;err&#125;</span>`</span>;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (authRes &amp;&amp; authRes.<span class="property">errMsg</span> != <span class="string">&quot;authorize:ok&quot;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;地理授权失败&quot;</span>, authRes.<span class="property">errMsg</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;android地理授权失败&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (platform == <span class="string">&quot;ios&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">// ios 12.0</span></span><br><span class="line">    <span class="keyword">let</span> sysVersion = <span class="built_in">parseInt</span>(sysInfo.<span class="property">system</span>.<span class="title function_">substr</span>(<span class="number">4</span>));</span><br><span class="line">    <span class="keyword">if</span> (sysVersion &lt; <span class="number">11</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;ios版本低&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> wx.<span class="property">wxp</span></span><br><span class="line">      .<span class="title function_">showModal</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&quot;请切到系统设置-&gt;wifi列表，等待wifi连接成功&quot;</span>,</span><br><span class="line">        <span class="attr">showCancel</span>: <span class="literal">false</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err&quot;</span>, err);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`运行错误：<span class="subst">$&#123;err&#125;</span>`</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;平台不支持&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 启动wifi模块</span></span><br><span class="line">  <span class="keyword">await</span> wx.<span class="property">wxp</span>.<span class="title function_">startWifi</span>().<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err&quot;</span>, err);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`运行错误：<span class="subst">$&#123;err&#125;</span>`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 拉取wifi列表</span></span><br><span class="line">  <span class="keyword">await</span> wx.<span class="property">wxp</span>.<span class="title function_">getWifiList</span>().<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err&quot;</span>, err);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`运行错误：<span class="subst">$&#123;err&#125;</span>`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 监听wifi列表到达</span></span><br><span class="line">    wx.<span class="title function_">onGetWifiList</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(res);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">if</span> (!res.<span class="property">wifiList</span>.<span class="property">length</span>) <span class="keyword">return</span> <span class="string">&quot;wifi列表为空&quot;</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res.wifiList&quot;</span>, res.<span class="property">wifiList</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// var signalStrength = 0;</span></span><br><span class="line">  <span class="keyword">var</span> bssid = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; res.<span class="property">wifiList</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> wifi = res.<span class="property">wifiList</span>[i];</span><br><span class="line">    <span class="keyword">if</span> (wifi.<span class="property">SSID</span> == ssid) &#123;</span><br><span class="line">      <span class="comment">// BSSID: wifi网络的唯一地址</span></span><br><span class="line">      bssid = wifi.<span class="property">BSSID</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!bssid) <span class="keyword">return</span> <span class="string">&quot;未查询到目标wifi&quot;</span>;</span><br><span class="line">  <span class="comment">// 连接wifi</span></span><br><span class="line">  <span class="keyword">let</span> res1 = <span class="keyword">await</span> wx.<span class="property">wxp</span></span><br><span class="line">    .<span class="title function_">connectWifi</span>(&#123;</span><br><span class="line">      <span class="attr">SSID</span>: ssid,</span><br><span class="line">      <span class="attr">BSSID</span>: bssid,</span><br><span class="line">      <span class="attr">password</span>: pass,</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err&quot;</span>, err);</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`运行错误：<span class="subst">$&#123;err&#125;</span>`</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="keyword">if</span> (res1) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;wifi连接成功&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;connectWifi:ok&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;未知错误&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connectWifi;</span><br></pre></td></tr></table></figure>

<p>app.json</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;permission&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;scope.userLocation&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;desc&quot;</span>: <span class="string">&quot;位置信息用途说明&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h1 id="云开发"><a href="#云开发" class="headerlink" title="云开发"></a>云开发</h1><h2 id="云开发提供的所有能力"><a href="#云开发提供的所有能力" class="headerlink" title="云开发提供的所有能力"></a>云开发提供的所有能力</h2><ul>
<li>云函数</li>
<li>云数据库</li>
<li>云存储</li>
<li>云调用</li>
<li>HTTP API</li>
<li>…</li>
</ul>
<p><img src="/img/md/wx17.png"></p>
<p><img src="/img/md/wx18.png"></p>
<p><img src="/img/md/wx19.png"></p>
<h2 id="云开发和非云开的区别？"><a href="#云开发和非云开的区别？" class="headerlink" title="云开发和非云开的区别？"></a>云开发和非云开的区别？</h2><h3 id="1-云开发是什么"><a href="#1-云开发是什么" class="headerlink" title="1. 云开发是什么"></a>1. 云开发是什么</h3><p>小程序云开发是一种新的开发方式，它能够帮助开发者快速、便捷地开发小程序。</p>
<h3 id="2-小程序云开发的优势"><a href="#2-小程序云开发的优势" class="headerlink" title="2. 小程序云开发的优势"></a>2. 小程序云开发的优势</h3><p>小程序云开发和非云开发有什么区别？这是一个很好的问题。</p>
<p>首先，我们来看看小程序云开发的优势。</p>
<p>总之，小程序云开发具有诸多优势，能够帮助我们快速、方便、安全地开发小程度。</p>
<h3 id="3-非云开发的优势"><a href="#3-非云开发的优势" class="headerlink" title="3. 非云开发的优势"></a>3. 非云开发的优势</h3><p>首先，我们来看一下小程序云开发和非云开发的区别：</p>
<p>小程序云开发是一种全新的开发方式，它使用了云端的资源，能够更加轻松地开发出高质量的小程序。非云开发则是相对传统的开发方式，使用本地的资源进行开发。</p>
<p>下面我们来看看小程序云开发和非云开发各自的优势：</p>
<h4 id="小程序云开发"><a href="#小程序云开发" class="headerlink" title="小程序云开发"></a>小程序云开发</h4><p>使用了云端的资源，能够更加轻松地开发出高质量的小程序。</p>
<p>在运行时也能够得到更好的性能。因为它不会像本地小程序那样占用过多的内存和CPU资源。</p>
<p>代码也更加容易维护和理解。因为代码是分布在不同的文件中，并且采用了标准化的代码风格。</p>
<p>对于新手来说，学习小程序云开发也相对容易一些。因为相对而言，它的代码量要少很多。</p>
<h4 id="非云开发"><a href="#非云开发" class="headerlink" title="非云开发"></a>非云开发</h4><p>相对传统的开发方式，使用本地的资源进行开发。</p>
<p>在运行时不会占用过多的内存和CPU资源（如果代码写得好的话)。</p>
<p>代码也相对容易理解和修改。因为代码是集中在一个文件中，并且采用了标准化的代码风格。</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p><strong>传统开发中</strong>， 开发者不仅需要关注前端的页面展示， 还需要搭建后端的数据库， 购买服务器</p>
<p>和域名，如果是境内服务器， 还需要备案等等。</p>
<p>小程序上线后， 开发者需要定期进行数据库维护、网络安全、负载均衡等工作</p>
<p><strong>云开发中</strong>，开发者只需要关注前端的页面展示， 后端的服务器、维护、安全处理等工作全部由腾讯云代替我们完成，方便了很多！</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://liwenzhe002.github.io">李文哲</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://liwenzhe002.github.io/2022/06/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">https://liwenzhe002.github.io/2022/06/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://liwenzhe002.github.io" target="_blank">李文哲的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序</a></div><div class="post_share"><div class="social-share" data-image="/img/wx%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wx.png" target="_blank"><img class="post-qr-code-img" src="/img/wx.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/zfb.png" target="_blank"><img class="post-qr-code-img" src="/img/zfb.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/27/NodeJS/" title="Node.JS"><img class="cover" src="/img/nodejs.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Node.JS</div></div></a></div><div class="next-post pull-right"><a href="/2022/06/17/Vue3/" title="Vue3"><img class="cover" src="/img/v3.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Vue3</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/1111.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">李文哲</div><div class="author-info__description">初次搭建，请多指教。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/liwenzhe002/liwenzhe002.github.io"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到李文哲的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B5%85%E8%B0%88%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.</span> <span class="toc-text">浅谈小程序</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E5%BA%94%E7%94%A8%E9%80%82%E5%90%88%E4%BD%BF%E7%94%A8%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91"><span class="toc-number">1.1.</span> <span class="toc-text">什么样的应用适合使用小程序开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E7%AE%80%E5%8D%95"><span class="toc-number">1.1.1.</span> <span class="toc-text">逻辑简单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%BD%8E%E9%A2%91"><span class="toc-number">1.1.2.</span> <span class="toc-text">使用低频</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E6%80%A7%E8%83%BD%E8%A6%81%E6%B1%82%E4%B8%8D%E6%9E%81%E8%87%B4"><span class="toc-number">1.1.3.</span> <span class="toc-text">对性能要求不极致</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%8E-H5%EF%BC%8C%E5%8E%9F%E7%94%9F%E5%BA%94%E7%94%A8%E6%9C%89%E4%BD%95%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">小程序与 H5，原生应用有何区别？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#H5-%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">H5 移动应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%94%9F%E5%BA%94%E7%94%A8"><span class="toc-number">1.2.2.</span> <span class="toc-text">原生应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B7%E5%90%88%E5%BA%94%E7%94%A8"><span class="toc-number">1.2.3.</span> <span class="toc-text">混合应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.2.4.</span> <span class="toc-text">小程序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">常见的小程序开发框架有哪些</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">2.</span> <span class="toc-text">小程序开发环境</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%89%B9%E7%82%B9"><span class="toc-number">3.</span> <span class="toc-text">小程序特点</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">小程序配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">4.1.</span> <span class="toc-text">全局配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.</span> <span class="toc-text">页面配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sitemap-%E9%85%8D%E7%BD%AE"><span class="toc-number">4.3.</span> <span class="toc-text">sitemap 配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%9F%BA%E7%A1%80"><span class="toc-number">5.</span> <span class="toc-text">小程序基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.1.</span> <span class="toc-text">框架接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App"><span class="toc-number">5.1.1.</span> <span class="toc-text">App</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Page"><span class="toc-number">5.1.2.</span> <span class="toc-text">Page</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WXML-%E8%AF%AD%E6%B3%95"><span class="toc-number">5.2.</span> <span class="toc-text">WXML 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ToDoList"><span class="toc-number">5.2.1.</span> <span class="toc-text">ToDoList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tab"><span class="toc-number">5.2.2.</span> <span class="toc-text">Tab</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#target-%E5%92%8C-currentTarget-%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">5.2.3.</span> <span class="toc-text">target 和 currentTarget 的区别？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WXSS-%E8%AF%AD%E6%B3%95"><span class="toc-number">5.3.</span> <span class="toc-text">WXSS 语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WXS-%E8%AF%AD%E6%B3%95"><span class="toc-number">5.4.</span> <span class="toc-text">WXS 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E9%87%8C%E8%A1%A5%E5%85%85%E4%B8%80%E7%82%B9%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%89%E4%BA%86-js-%E8%BF%98%E8%A6%81%E8%AE%BE%E8%AE%A1-wxs%EF%BC%9F"><span class="toc-number">5.4.1.</span> <span class="toc-text">这里补充一点，为什么有了 js 还要设计 wxs？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81WXS-%E7%9A%84%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%BA%93"><span class="toc-number">5.4.1.1.</span> <span class="toc-text">1、WXS 的基础类库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E6%95%B0%E7%BB%84%E9%81%8D%E5%8E%86"><span class="toc-number">5.4.1.2.</span> <span class="toc-text">2、数组遍历</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD"><span class="toc-number">5.4.1.3.</span> <span class="toc-text">3、变量类型判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E6%80%A7%E8%83%BD%E5%B7%AE%E5%BC%82"><span class="toc-number">5.4.1.4.</span> <span class="toc-text">4、性能差异</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E5%B9%B3%E5%8F%B0%E5%B7%AE%E5%BC%82"><span class="toc-number">5.4.1.5.</span> <span class="toc-text">5、平台差异</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#FormatTime"><span class="toc-number">5.4.1.5.1.</span> <span class="toc-text">FormatTime</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Search"><span class="toc-number">5.4.1.5.2.</span> <span class="toc-text">Search</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82"><span class="toc-number">5.5.</span> <span class="toc-text">数据请求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%BB%84%E4%BB%B6"><span class="toc-number">5.6.</span> <span class="toc-text">小程序组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#image"><span class="toc-number">5.6.1.</span> <span class="toc-text">image</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#swiper"><span class="toc-number">5.6.2.</span> <span class="toc-text">swiper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scrollview"><span class="toc-number">5.6.3.</span> <span class="toc-text">scrollview</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rich-text"><span class="toc-number">5.6.4.</span> <span class="toc-text">rich-text</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#icon"><span class="toc-number">5.6.5.</span> <span class="toc-text">icon</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#progress"><span class="toc-number">5.6.6.</span> <span class="toc-text">progress</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#movable-view"><span class="toc-number">5.6.7.</span> <span class="toc-text">movable-view</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A6%E6%BB%91%E5%88%A0%E9%99%A4%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.6.7.1.</span> <span class="toc-text">左滑删除实现</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shopCar"><span class="toc-number">5.6.8.</span> <span class="toc-text">shopCar</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-number">5.7.</span> <span class="toc-text">自定义组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#selfComponent"><span class="toc-number">5.7.1.</span> <span class="toc-text">selfComponent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#navbar"><span class="toc-number">5.7.2.</span> <span class="toc-text">navbar</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#slot-%E6%8F%92%E6%A7%BD"><span class="toc-number">5.8.</span> <span class="toc-text">slot 插槽</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">5.9.</span> <span class="toc-text">组件的生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC"><span class="toc-number">5.10.</span> <span class="toc-text">路由跳转</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">5.11.</span> <span class="toc-text">页面生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="toc-number">5.12.</span> <span class="toc-text">获取用户信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7-openId"><span class="toc-number">5.13.</span> <span class="toc-text">获取用户 openId</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E6%94%BE%E8%83%BD%E5%8A%9B"><span class="toc-number">6.</span> <span class="toc-text">小程序开放能力</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%BF%9E%E6%8E%A5-wifi"><span class="toc-number">6.1.</span> <span class="toc-text">小程序连接 wifi</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%91%E5%BC%80%E5%8F%91"><span class="toc-number">7.</span> <span class="toc-text">云开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%91%E5%BC%80%E5%8F%91%E6%8F%90%E4%BE%9B%E7%9A%84%E6%89%80%E6%9C%89%E8%83%BD%E5%8A%9B"><span class="toc-number">7.1.</span> <span class="toc-text">云开发提供的所有能力</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%91%E5%BC%80%E5%8F%91%E5%92%8C%E9%9D%9E%E4%BA%91%E5%BC%80%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">7.2.</span> <span class="toc-text">云开发和非云开的区别？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BA%91%E5%BC%80%E5%8F%91%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">7.2.1.</span> <span class="toc-text">1. 云开发是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BA%91%E5%BC%80%E5%8F%91%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">7.2.2.</span> <span class="toc-text">2. 小程序云开发的优势</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%9D%9E%E4%BA%91%E5%BC%80%E5%8F%91%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">7.2.3.</span> <span class="toc-text">3. 非云开发的优势</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BA%91%E5%BC%80%E5%8F%91"><span class="toc-number">7.2.3.1.</span> <span class="toc-text">小程序云开发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E%E4%BA%91%E5%BC%80%E5%8F%91"><span class="toc-number">7.2.3.2.</span> <span class="toc-text">非云开发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">7.2.3.3.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/08/21/TypeScript/" title="TypeScript"><img src="/img/TypeScript.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TypeScript"/></a><div class="content"><a class="title" href="/2022/08/21/TypeScript/" title="TypeScript">TypeScript</a><time datetime="2022-08-21T02:38:41.000Z" title="发表于 2022-08-21 10:38:41">2022-08-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/27/NodeJS/" title="Node.JS"><img src="/img/nodejs.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Node.JS"/></a><div class="content"><a class="title" href="/2022/07/27/NodeJS/" title="Node.JS">Node.JS</a><time datetime="2022-07-27T02:38:41.000Z" title="发表于 2022-07-27 10:38:41">2022-07-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" title="微信小程序"><img src="/img/wx%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="微信小程序"/></a><div class="content"><a class="title" href="/2022/06/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" title="微信小程序">微信小程序</a><time datetime="2022-06-21T02:38:41.000Z" title="发表于 2022-06-21 10:38:41">2022-06-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/17/Vue3/" title="Vue3"><img src="/img/v3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue3"/></a><div class="content"><a class="title" href="/2022/06/17/Vue3/" title="Vue3">Vue3</a><time datetime="2022-06-17T02:00:00.000Z" title="发表于 2022-06-17 10:00:00">2022-06-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/17/JavaScript/" title="JavaScript"><img src="/img/v2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JavaScript"/></a><div class="content"><a class="title" href="/2020/12/17/JavaScript/" title="JavaScript">JavaScript</a><time datetime="2020-12-17T02:00:00.000Z" title="发表于 2020-12-17 10:00:00">2020-12-17</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/wx%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 李文哲</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>